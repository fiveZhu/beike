function b(){h=$(window).height(),t=$(document).scrollTop(),$("#back-top").attr("daty-id")?t>h?($("#gotop").show(),$(".fix-right .tips,.fix-right .has-ask").show()):($("#gotop").hide(),$(".fix-right .tips,.fix-right .has-ask").hide()):($(".fix-right .tips,.fix-right .has-ask").show(),t>h?$("#gotop").show():$("#gotop").hide())}function ent(){$(".ewm-close").click(function(e){$(".sh-erweima").hide().addClass("hide"),$(this).hide();var t=$(".sh-erweima").attr("class");window.localStorage&&window.localStorage.setItem("menu",JSON.stringify(t))});var e=window.localStorage&&window.localStorage.getItem("menu");e?e.indexOf("sh-erweima hide")>=0&&$(".sh-erweima,.ewm-close").hide():$(".sh-erweima,.ewm-close").show()}!function(e){e.fn.scrollLoading=function(t){var n={attr:"data-url",container:e(window),callback:e.noop},a=e.extend({},n,t||{});a.cache=[],e(this).each(function(){var t=this.nodeName.toLowerCase(),n=e(this).attr(a.attr),o={obj:e(this),tag:t,url:n};a.cache.push(o)});var o=function(t){e.isFunction(a.callback)&&a.callback.call(t.get(0))},i=function(){var t,n=a.container.height();t=e(window).get(0)===window?e(window).scrollTop():a.container.offset().top,e.each(a.cache,function(e,a){var i=a.obj,r=a.tag,c=a.url;if(i){var s=i.offset().top-t,l=s+i.height();(s>=0&&s<n||l>0&&l<=n)&&(c?"img"===r?o(i.attr("src",c)):i.load(c,{},function(){o(i)}):o(i),a.obj=null)}})};i(),a.container.bind("scroll",i)}}(jQuery),function(e,t,n,a){var o=e(t);e.fn.lazyload=function(a){function i(){var t=0;c.each(function(){var n=e(this);if(!s.skip_invisible||n.is(":visible"))if(e.abovethetop(this,s)||e.leftofbegin(this,s));else if(e.belowthefold(this,s)||e.rightoffold(this,s)){if(++t>s.failure_limit)return!1}else n.trigger("appear"),t=0})}var r,c=this,s={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return a&&(void 0!==a.failurelimit&&(a.failure_limit=a.failurelimit,delete a.failurelimit),void 0!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),e.extend(s,a)),r=void 0===s.container||s.container===t?o:e(s.container),0===s.event.indexOf("scroll")&&r.bind(s.event,function(){return i()}),this.each(function(){var t=this,n=e(t);t.loaded=!1,void 0!==n.attr("src")&&!1!==n.attr("src")||n.is("img")&&n.attr("src",s.placeholder),n.one("appear",function(){if(!this.loaded){if(s.appear){var a=c.length;s.appear.call(t,a,s)}e("<img />").bind("load",function(){var a=n.attr("data-"+s.data_attribute);n.hide(),n.is("img")?n.attr("src",a):n.css("background-image","url('"+a+"')"),n[s.effect](s.effect_speed),t.loaded=!0;var o=e.grep(c,function(e){return!e.loaded});if(c=e(o),s.load){var i=c.length;s.load.call(t,i,s)}}).attr("src",n.attr("data-"+s.data_attribute))}}),0!==s.event.indexOf("scroll")&&n.bind(s.event,function(){t.loaded||n.trigger("appear")})}),o.bind("resize",function(){i()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&c.each(function(){e(this).trigger("appear")})}),e(n).ready(function(){i()}),this},e.belowthefold=function(n,a){return(void 0===a.container||a.container===t?(t.innerHeight?t.innerHeight:o.height())+o.scrollTop():e(a.container).offset().top+e(a.container).height())<=e(n).offset().top-a.threshold},e.rightoffold=function(n,a){return(void 0===a.container||a.container===t?o.width()+o.scrollLeft():e(a.container).offset().left+e(a.container).width())<=e(n).offset().left-a.threshold},e.abovethetop=function(n,a){return(void 0===a.container||a.container===t?o.scrollTop():e(a.container).offset().top)>=e(n).offset().top+a.threshold+e(n).height()},e.leftofbegin=function(n,a){return(void 0===a.container||a.container===t?o.scrollLeft():e(a.container).offset().left)>=e(n).offset().left+a.threshold+e(n).width()},e.inviewport=function(t,n){return!(e.rightoffold(t,n)||e.leftofbegin(t,n)||e.belowthefold(t,n)||e.abovethetop(t,n))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("common/jquery.scrollLoading",function(){}),function(e){e.fn.fixtop=function(t){var n=e.extend({marginTop:0,zIndex:1e3,fixedWidth:"100%"},t),a=this.offset().top-n.marginTop,o=this,i=(o.height(),n.marginTop,e("<div/>").css({display:o.css("display"),width:o.outerWidth(!0),height:o.outerHeight(!0),float:o.css("float")}));return e(window).scroll(function(t){var r=a;e(this).scrollTop()>r&&"fixed"!=o.css("position")&&(o.after(i),o.css({position:"fixed",top:n.marginTop+"px","z-index":n.zIndex,width:n.fixedWidth}),void 0!==n.fixed&&n.fixed(o)),e(this).scrollTop()<r&&"fixed"==o.css("position")&&(i.remove(),o.css({position:"relative",top:"0px","z-index":n.zIndex}),void 0!==n.unfixed&&n.unfixed(o))}),this}}(jQuery),define("common/fixtop",function(){}),$.stringFormat=function(e,t){e=String(e);var n=Array.prototype.slice.call(arguments,1),a=Object.prototype.toString;return n.length?(n=1==n.length&&null!==t&&/\[object Array\]|\[object Object\]/.test(a.call(t))?t:n,e.replace(/#\{(.+?)\}/g,function(e,t){var o=n[t];return"[object Function]"==a.call(o)&&(o=o(t)),void 0===o?"":o})):e},$.trimN=function(e){return e.replace(/\n{2,}/gm,"\n")},$.fixedOldComment=function(e){return e?$.decodeHTML($.trimN(e.replace(/<[^>]+>/g,"\n"))):e},$.replaceTpl=function(e,t,n){var a=String(e),o=n||/#\{([^}]*)\}/gm,i=String.trim||function(e){return e.replace(/^\s+|\s+$/g,"")};return a.replace(o,function(e,n){return t[i(n)]})},$.strHTML=function(e,t){e=String(e);var n=Array.prototype.slice.call(arguments,1),a=Object.prototype.toString;return n.length?(n=1==n.length&&null!==t&&/\[object Array\]|\[object Object\]/.test(a.call(t))?t:n,e.replace(/#\{(.+?)\}/g,function(e,t){var o=n[t];return"[object Function]"==a.call(o)&&(o=o(t)),void 0===o?"":$.encodeHTML(o)})):e},$.showIframeImg=function(e,t){var n=$(e),a=n.height(),o=n.width(),i=$.stringFormat("<style>body{margin:0;padding:0}img{width:#{0}px;height:#{1}px;}</style>",o,a),r="frameimg"+Math.round(1e9*Math.random());window.betafang[r]="<head>"+i+'</head><body><img id="img-'+r+"\" src='"+t+"' /></body>",e.append('<iframe style="display:none" id="'+r+'" src="javascript:parent.betafang[\''+r+'\'];" frameBorder="0" scrolling="no" width="'+o+'" height="'+a+'"></iframe>')},$.loadScript=function(e){function t(){if(o)return!1;o=!0,i.onload=null,i.onerror=null,a.complete&&a.complete(),c.resolve(),r.removeChild(i)}function n(){if(o)return!1;o=!0,a.fail&&a.fail(),r.removeChild(i),c.reject()}var a={url:"",charset:"utf-8",complete:$.noop,fail:$.noop};if($.extend(a,e),!a.url)throw"url is requireed";var o=!1,i=document.createElement("script"),r=document.getElementsByTagName("head")[0],c=$.Deferred();return i.onload=t,i.onerror=n,i.onreadystatechange=function(e){"complete"==i.readyState&&t()},i.type="text/javascript",i.src=a.url,i.charset=a.charset,r.appendChild(i),c},$.TextAreaUtil=function(e){var t=document.selection;return{getCursorPosition:function(e){var n=0;if(t){e.focus();try{var a=null;a=t.createRange();var o=a.duplicate();o.moveToElementText(e),o.setEndPoint("EndToEnd",a),e.selectionStartIE=o.text.length-a.text.length,e.selectionEndIE=e.selectionEndIE+a.text.length,n=e.selectionStartIE}catch(t){n=e.value.length}}else(e.selectionStart||"0"==e.selectionStart)&&(n=e.selectionStart);return n},getSelectedText:function(t){return e.getSelection?function(e){return void 0!=e.selectionStart&&void 0!=e.selectionEnd?e.value.slice(e.selectionStart,e.selectionEnd):""}(t):document.selection.createRange().text}}}(window),$.getQuery=function(e,t){var n=e.split("?"),a="";n&&2===n.length&&(a=n[1]);var o=a.split("&");if(!t)return"";for(var i=0,r=o.length;i<r;i++){var c=o[i].split("=");if(c[0]===t)return c[1]}return""},$.browser=$.browser||{},$.browser.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,/dev.+\.lianjia\.com\//.test(location.href)&&function(){var e=$.ajax;$.ajax=function(t){var n=t.url.match(/^http.+ajax\.api\.ke\.com/),a=n?n[0]:"";~location.href.indexOf("debug=mock")&&(0==t.url.indexOf("/")?(t.url="http://mock.ke.com/mock/872"+t.url,t.dataType="json"):a&&~t.url.indexOf(a)&&(t.url=t.url.replace(a,"http://mock.ke.com/mock/872"),t.dataType="json"),t.url=t.url.replace(/\/+/g,"/").replace(/\:\//,"://"));var o=function(e){404==e.errcode?console.warn(t.url,e):console.log(t.url,e)},i=t.success;return t.success=function(e){"on"==localStorage.getItem("debug")&&o(e),"function"==typeof i&&i(e)},e(t)}}();var betafang=window.betafang||{};$(function(){/msie (\d+\.\d+)/i.test(navigator.userAgent)&&$("body").addClass("ie","ie"+(document.documentMode||+RegExp.$1)),$(".lj-lazy").lazyload(),$(".lazyload").scrollLoading(),$("#keyword-box,#keyword-box-01").closest("form").on("submit",function(){var e=$(this),t=e.attr("data-action")||e.attr("action"),n=e.find(".txt"),a=$.trim(n.val());if(a==n.attr("placeholder")&&(a=""),t+=encodeURIComponent(a),"_blank"!=e.attr("target"))return window.location.href=t,!1;e.attr("action",t)})}),define("common/base",function(){});var ajax=function(){var e={},t=function(){};return e.get=function(e,n,a,o){if(a=a||t,o=o||t,!e)return!1;$.getJSON(e,n,function(e){0===e.status?a(e.data):o(e)},function(e){o({status:500,statusInfo:"服务请求失败"})})},e.post=function(e,n,a,o){if(a=a||t,o=o||t,!e)return!1;$.ajax({type:"POST",url:e,data:n,success:function(e){0===e.status||0===e.errno?a(e.data):o(e)},failure:function(e){o({status:500,statusInfo:"服务请求失败"})},dataType:"json"})},e}();define("common/ajax",function(){}),function(){function e(e,t){var n=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.src=e,t=t||function(){},a.onload=a.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),a.onload=a.onreadystatechange=null,n&&a.parentNode&&n.removeChild(a))},n.insertBefore(a,n.firstChild)}function t(t,n,o){var i="cbk_"+Math.round(1e4*Math.random()),r=a+"?from="+n+"&to=4&x="+t.lng+"&y="+t.lat+"&callback=BMap.Convertor."+i;o=o||function(){},e(r),BMap.Convertor[i]=function(e){delete BMap.Convertor[i];var t=new BMap.Point(e.x,e.y);o(t)}}function n(t,n,o){var i=a+"?from="+n+"&to=4&mode=1",r=[],c=[];o=o||function(){};var s=function(){var t="cbk_"+Math.round(1e4*Math.random());e(i+"&x="+r.join(",")+"&y="+c.join(",")+"&callback=BMap.Convertor."+t),r=[],c=[],BMap.Convertor[t]=function(e){delete BMap.Convertor[t];var n=null,a=[];for(var i in e)if(n=e[i],0===n.error){var r=new BMap.Point(n.x,n.y);a[i]=r}else a[i]=null;o(a)}};for(var l in t)l%20==0&&0!==l&&s(),r.push(t[l].lng),c.push(t[l].lat),l==t.length-1&&s()}var a="//api.map.baidu.com/ag/coord/convert";window.BMap=window.BMap||{},BMap.Convertor=$({}),BMap.Convertor.translate=t,BMap.Convertor.translateMore=n}();var LJFixed=function(e,t){function n(t){if(!o.isSupportPlaceHolder){var n=e(t),a=n.attr("placeholder");""===n.val()&&n.val(a).addClass("placeholder"),n.focus(function(){n.val()===n.attr("placeholder")&&n.val("").removeClass("placeholder")}).blur(function(){""===n.val()&&n.val(n.attr("placeholder")).addClass("placeholder")}).closest("form").submit(function(){n.val()===n.attr("placeholder")&&n.val("")})}}function a(){e("input[placeholder],textarea[placeholder]").each(function(){"password"!=e(this).attr("type")&&n(this)})}var o={isSupportPlaceHolder:"placeholder"in t.createElement("input")};e(function(){a()}),e.fixPlaceholder=n;var i={};return i.fixedPlaceHolder=n,i}($,document);define("common/fixed",function(){});var Pagination=function(require){function e(e,t,n){var a=[];if(n=n||6,t=t||1,e<=n)for(var o=0;o<e;o++)a.push(o+1);else{a.push(1),t>4&&a.push("");for(var i=Math.max(t-2,2),r=Math.min(t+2,e-1),o=i;o<=r;o++)a.push(o);t<e-3&&a.push(""),a.push(e)}return a}function t(e,t,n,a){function o(e){if(a){var t=a.replace(/\{page\}/g,e);return 1===e&&t.search("pg1")>-1&&(t=t.search("pg1/")>-1?t.replace(/pg1\//,""):t.replace(/pg1/,"")),t}return"javascript:;"}var i=[];if(n=n||1,e&&e.length){n>1&&t>6&&i.push('<a href="'+o(n-1)+'" data-page="'+(n-1)+'" >上一页</a>');for(var r=e.length,c=0;c<r;c++)i.push(e[c]?"<a "+(e[c]==n?'class="on"':"")+' href="'+o(e[c])+'" data-page="'+e[c]+'">'+e[c]+"</a>":"<span>...</span>");n<t&&t>6&&i.push('<a href="'+o(n+1)+'" data-page="'+(n+1)+'">下一页</a>')}return i.join("")}function n(n){function a(){c.template=c.dom.attr("page-url");var e=c.dom.attr("target-wrapper");e&&(c.targetWrapper=$(e));var t=c.dom.attr("page-data");t?(t=$.parseJSON(t),$.extend(c,t)):c.targetWrapper&&(c.curPage=1,c.totalPage=c.targetWrapper.children().length)}function o(){if(!(c.totalPage<=1)){var n=e(c.totalPage,c.curPage);n.length||c.dom.hide();var a=t(n,c.totalPage,c.curPage,c.template);if(c.dom.html(a),c.targetWrapper){var o=c.targetWrapper.children();o.hide(),o.eq(c.curPage-1).show(),c.targetWrapper.find(".lj-lazy").lazyload()}}}function i(){c.targetWrapper&&s.on("showPage",function(e,t){c.curPage=t,o()})}function r(){c.dom.delegate("[data-page]","click",function(){var e=$(this).attr("data-page");s.trigger("showPage",parseInt(e))})}if(n){var c={dom:$(n),template:"",targetWrapper:"",totalPage:0,curPage:0},s=$({});return function(){a(),r(),i(),o()}(),s}}return $(function(){$("[comp-module='page']").each(function(){n($(this))})}),n}();define("common/pagination",function(){}),$(document).ready(function(e){b(),ent(),$("body").on("click","#gotop",function(){$("html , body").animate({scrollTop:0},1e3)})}),$(window).scroll(function(e){b()}),$("body").on("click","#back-top .mycart .popup",function(e){e.stopPropagation()}),define("common/backtop",function(){}),define("common/pushMessage",function(require){return function(e){var t=ljConf.pageConfig.ajaxroot+"user/favorite/getnotifynum/",n={house_showing:{url:"//user.lianjia.com/site/seeSchedule",text:'你的看房日程有<span class="unreadNumber">#{unread}</span>条更新'},community_new_house_source:{url:"//user.lianjia.com/?filter=3",text:'你关注的小区有<span class="unreadNumber">#{unread}</span>条新上'},deal:{url:"//user.lianjia.com/?filter=1",text:'你关注的房源有<span class="unreadNumber">#{unread}</span>条成交'},price_changed:{url:"//user.lianjia.com/?filter=2",text:'你关注的房源有<span class="unreadNumber">#{unread}</span>条变价'},"search:new":{url:"//user.lianjia.com/?filter=4",text:'你保存的搜索条件有<span class="unreadNumber">#{unread}</span>条变动'},on_answer_insert_concern:{url:"//user.lianjia.com/site/myWenda/?filter=1",text:'您关注的问题有<span class="unreadNumber">#{unread}</span>条回复'},on_answer_insert:{url:"//user.lianjia.com/site/myWenda/",text:'您提问的问题有<span class="unreadNumber">#{unread}</span>条回复'},on_extra_answer_pass:{url:"//user.lianjia.com/site/myWenda/?filter=2",text:'您收到<span class="unreadNumber">#{unread}</span>条新追答'},on_special_question_pass:{url:"//user.lianjia.com/site/myWenda/?filter=3",text:'您收到<span class="unreadNumber">#{unread}</span>条定向提问'},on_extra_question_pass:{url:"//user.lianjia.com/site/myWenda/?filter=4",text:'您收到<span class="unreadNumber">#{unread}</span>条追问'},xuequ_bbs:{url:"//user.lianjia.com/site/bbs?type=4",text:'论坛有<span class="unreadNumber">#{unread}</span>条回复'},ting_shou:{url:"//user.lianjia.com/",text:'您关注的<span class="unreadNumber">#{unread}</span>套房源已下架'}},a=$.extend({},n,{on_extra_answer_pass:{url:"//agent.lianjia.com/preference/wenda/?filter=2",text:'您收到<span class="unreadNumber">#{unread}</span>条新追答'},on_special_question_pass:{url:"//agent.lianjia.com/preference/wenda/?filter=3",text:'您收到<span class="unreadNumber">#{unread}</span>条定向提问'},on_extra_question_pass:{url:"//agent.lianjia.com/preference/wenda/?filter=4",text:'您收到<span class="unreadNumber">#{unread}</span>条追问'}});$.ajax({url:t,type:"get",dataType:"jsonp",success:function(t){if(0===t.errno){var o=t.data.is_agent?a:n,i=0;for(var r in t.data.group_by_type)0!==t.data.group_by_type[r].unread&&o.hasOwnProperty(r)&&(i+=t.data.group_by_type[r].unread);0!==i&&(e.tipContainer.html(e.tipTpl.render({unreadNum:i})),e.container.html(e.msgTpl.render({group_by_type:t.data.group_by_type,pushMsgMap:o})))}}})}}),define("common/login",function(){function e(){return!!BeikeLoginSDK||(console.error("BeikeLoginSDK is not ready!"),!1)}function t(){e()&&BeikeLoginSDK.getUserInfo(function(e){e&&(n(e),e.username&&a())})}function n(e){var t=$(".typeUserInfo");e&&e.username&&(e.username=$.encodeHTML($.getLimitString(e.username,20,".."))),t.each(function(){var t=$(this),n=t.find(".template").html();if(n){n=$.template(n);var a=$.trim(n.render({data:e}));t.find(".typeShowUser").html(a)}})}function a(){require("common/pushMessage")({container:$("#userNews"),msgTpl:$.template($("#News").html()),tipContainer:$("#indexTipContainer"),tipTpl:$.template('<span class="login_bubble_tip"><%=unreadNum%></span>')})}function o(e){return window.track_handle&&window.track_handle.send("24937","WebClick",{source_type:"lianjia_pc_upassport"}),window.$ULOG&&$ULOG.send("10225"),BeikeLoginSDK.init(0,function(){location.reload()}),!1}function i(){return window.$ULOG&&$ULOG.send("10225"),BeikeLoginSDK.init(2,function(){location.reload()}),!1}function r(){BeikeLoginSDK.logout()}var c=$.env.getEnv();return $(document.body).ready(function(){$(".typeUserInfo").delegate(".btn-login","click",o),$(".typeUserInfo").delegate(".btn-register","click",i),$(".typeUserInfo").delegate(".btn-loginout","click",r)}),{init:function(){t(),c="dev"===c||"test"===c?"test":"prod",BeikeLoginSDK.config({env:c})},openLoginDialog:o,openDialogRegister:i}}),define("common/scrollCaller",function(require){function e(){for(var e=r.scrollTop(),t=c.length-1;t>=0;t--)try{c[t].call(r,e)}catch(e){console.error&&console.error(e.stack)}}function t(){i&&clearTimeout(i),i=setTimeout(function(){e()},30)}function n(e){e?r.scroll(t):r.unbind("scroll",t)}function a(e){c.length||n(!0),c.push(e)}function o(e){var t=$.inArray(e,c);t>=0&&c.splice(t,1),c.length||n(!1)}var i=!1,r=$(window),c=[];return function(e){if(!e)throw"fun is required";return a(e),{destroy:function(){o(e)}}}}),define("common/env",function(require){function e(e){var t="";return e.scheme&&(t+=e.scheme+"://"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+="/"+e.path),e.query&&(t+="?"+e.query),e.hash&&(t+="#"+e.hash),t}var t={host:"",scheme:"",port:"",env:"online"},n={};return n.getEnv=function(){return t.env},n.fixedHost=function(e){if(!e)return t.host;var n=e.substring(0,e.indexOf("."));switch(t.env){case"dev":if(0!==n.indexOf(t.env))return t.env+e;break;case"test":if(0!==n.indexOf(t.env)){var a=t.host.match(/test(\S*)\-/);return a+e}break;case"preview":if(0!==n.indexOf(t.env)){var a=t.host.match(/preview(\S*)\-/);return a+e}}return e},n.fixedUrl=function(a,o){o=o||!1,a.indexOf("http")<0&&(a=location.protocol+a);var i=$.parseURL(a);return i.host?(!o&&(i.host=n.fixedHost(i.host)),i.port=t.port,i.scheme||(i.scheme=t.scheme)):(i.host=t.host,i.scheme=t.scheme,i.port=t.port),e(i)},n.isSameDomain=function(e){return $.parseURL(e).host==t.host},function(){var e=$.parseURL(location.href);t.host=e.host,t.scheme=e.scheme,t.port=e.port;var n=t.host.match(/\.?(\S+)\.lianjia\.com/)[1];0===n.indexOf("dev")?t.env="dev":0===n.indexOf("test")&&(t.env="test")}(),n}),define("common/lazyExecute",function(require){function e(e){for(var n,a=r.width(),o=window.innerHeight,c=0,s=i.length;c<s;c++)n=i[c],t(n,e,a,o)&&!n.always&&--n.times<=0&&(i.splice(c,1),s--,c--)}function t(e,t,n,a){var o=$(e.el);t||(t=document.documentElement.scrollTop||document.body.scrollTop),n||(n=r.width()),a||(a=window.innerHeight);var i=o.offset(),c=i.top-e.marginTop,s=c+o.height()+e.marginBottom,l=t,u=t+a;return!(s<l||c>u)&&(e.callback&&e.callback(),!0)}function n(){a=o(function(t){e(t)})}var a,o=require("common/scrollCaller"),i=[],r=$(window);return function(e){var o={el:"",marginTop:0,marginBottom:0,times:1,always:!1,callback:$.noop};if($.extend(o,e),o.el&&$(o.el).length){if(!t(o)||o.always)return i.push(o),a||n(),{destroy:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1)},pause:function(){var e=i.indexOf(o);e>=0&&i.splice(e,1)},resume:function(){i.indexOf(o)<0&&i.push(o)}}}}}),define("common/footer",function(require){function e(){var e=$(".lianjia-link-box .tab");$(".link-list div").eq(0).show(),$(".link-footer div").eq(0).show(),e.delegate("span","mouseover",function(e){var t=$(e.currentTarget),n=t.index(),a=t.closest(".tab").next(".link-list");t.addClass("hover").siblings("span").removeClass("hover"),a.find("div").eq(n).show().siblings("div").hide()})}function t(){$(document.body).on("mousedown",function(e){$(e.target).closest(".hot-sug,.search-txt ul,.del").length||($(".hot-sug").hide(),p.css({height:"35px",overflow:"hidden",border:"0px",background:"none",left:"0px",top:"0px",display:"none"}))}),$("#keyword-box:text").click(function(e){""==$(this).val()?$(e.target).next("div").show():($("#keyword-box").select(),$(e.target).next("div").show())}),$("#keyword-box").keydown(function(e){$(e.target).next("div").hide()})}function n(){var e=$(".frauds-list .tab");$(".link-list div").eq(0).show(),e.delegate("span","click",function(e){var t=$(e.currentTarget),n=t.index(),a=t.closest(".tab").next(".link-list");t.addClass("hover").siblings("span").removeClass("hover"),a.find("div").eq(n).show().siblings("div").hide()})}function a(){var e=$(".hot-sug ul");e.eq(0).show(),g.click(function(){p.css({height:"auto",overflow:"auto",background:"#fff",border:"1px solid #ccc",left:"-1px",top:"-1px",display:"block"})}),"ershoufang"==g.attr("actdata")&&$(".savesearch").show(),p.delegate("li label","click",function(t){var n=$(t.currentTarget),a=n.parent("li").index(),o=n.attr("actdata");o=o.split("=")[1],g.text(n.text()),g.attr("actdata",o),p.css({display:"none"});var i=$.queryToJson(n.attr("actData"));i&&defaultSuggest.suggestView.model.trans.setArgs(i);var r=$(this).attr("formact"),c=n.attr("tra"),s=n.attr("tips");n.closest(".search-txt").find("form").attr({action:r,target:c}),n.closest(".search-txt").find("form").attr({"data-action":r}),n.closest(".search-txt").find(".autoSuggest").attr("placeholder",s),e.eq(a).show().siblings("ul").hide();var l=n.closest(".search-txt").find(".autoSuggest");"placeholder"in document.createElement("input")?l.val(""):l.val(s),"ershoufang"==o?$(".savesearch").show():$(".savesearch").hide(),u()})}function o(){var e=$("#back-top");if(e.hasClass("fix-right-v2")||e.hasClass("fix-right-v3")){var t="";e.on("mouseenter","li",function(){var e=$(this).find(".popup").eq(0);t=this.className,e.show(),e.stop().animate({opacity:"1",right:"38px"},200)}).on("mouseleave","li",function(){var e=$(this).find(".popup").eq(0),n=this.className;t="",e.stop().animate({opacity:"0",right:"48px"},200,function(){n!=t&&e.hide()})})}else{var n=$("#back-top .tips li,#gotop");n.mouseenter(function(){$(this).find("span").css({opacity:"1"}),$(this).css({overflow:"inherit",width:"auto"})}),n.mouseleave(function(e){$(this).find("span").css({opacity:"0"}),$(this).css({overflow:"hidden",width:"37px"})})}}function i(){var e=$(".feedback-box");$("#tel").val();e.delegate("#sub","click",function(){var t=($("#sub"),$("#tips")),n=($("#count"),$("#tel").val()),a=$("#count").val();a=$.trim(a);var o=$("#count").attr("placeholder");if(""==a||a==o)return $(".erro-tips").show(),!1;var i={contact:n,content:a};$.ajax({type:"POST",url:"//www.lianjia.com/site/accuse/",dataType:"json",data:i,xhrFields:{withCredentials:!0},crossDomain:!0,success:function(n){0==n.status?(t.html("反馈成功非常感谢您的反馈！"),e.delay(2e3).fadeOut().removeClass("bounceIn"),v.delay(2e3).fadeOut()):t.html("反馈失败请重新填写！")}})}),e.delegate(".tab span","click",function(){$(".complain .tab-box").eq($(this).index()).show().siblings().hide(),$(this).addClass("check").siblings().removeClass("check")});e.delegate(".ent","click",function(){$("#tousu .btn-more").attr("href","//"+window.location.host.split(".").slice(-3).join(".")+"/report/tousu/");var e=ljConf.pageConfig.ajaxroot+"ajax/tousu/GetCityTousuBrief";$.ajax({url:e,dataType:"jsonp",data:{city_id:ljConf.city_id}}).done(function(e){var t=$(".feedback-box #list");t.html("");var e=e.data;if(e.data&&e.data.length<=0&&$("#tousu").hide(),e.data&&0==e.code){for(var n=e.data,a="",o=0;o<n.length;o++){var i;i=1==n[o].issue_status?"未处理":2==n[o].issue_status?"处理中":"已完成",a+=$.replaceTpl('<li><span class="time">#{issue_time}</span><span class="name">#{customer_name}</span><span class="phone">#{customer_phone}</span><span class="type">#{trade_type}</span><span class="finish">#{issue_status}</span></li>',{issue_time:n[o].issue_time,customer_name:n[o].customer_name,customer_phone:n[o].customer_phone,trade_type:n[o].trade_type,issue_status:i})}t.append(a)}})})}function r(){var e=($("#feedback"),$(".feedback-box"));e.fadeOut().removeClass("bounceIn"),e.html(m),v.fadeOut()}function c(){var e=$("#feedback"),t=$(".feedback-box");e.click(function(e){t.show(),t.addClass("bounceIn"),v.fadeIn(300),t.html(m)}),v.click(function(e){r()}),t.delegate(".closebok","click",function(e){r()})}function s(){$("#back-top").on("click","li",function(){var e=$(this).find("a").attr("data-url");if(e)if(window.loginData&&1==window.loginData.code)window.open(e);else{var t=$(".btn-login");t.length>0?t.trigger("click"):alert("请登录后使用，谢谢！")}})}function l(e,t){searchHis=localStorage.getItem(e),searchHis=JSON.parse(searchHis),searchHis?($.each(searchHis,function(e,n){n&&n.name==t.name&&searchHis.splice(e,1)}),searchHis.unshift(t),saveQuery=searchHis.slice(0,10)):saveQuery=[t],localStorage.setItem(e,JSON.stringify(saveQuery))}function u(){var e=$(".btn");if($(".search-tab .check").length>0){var t=$(".search-tab .check").attr("actdata"),n=e.attr("daty-id");menu=t+n,$("#keyword-box").on("formSelect",function(e,t){$(this).val($(t).find(".hot-title i").text()),url=$(t).attr("actdata"),url="string"==typeof url?url:"",url=url.substring(url.indexOf("&url=")+5,url.lastIndexOf("&title")),url=unescape(url),$(this).attr("url",url)}),e.click(function(e){if($("#keyword-box").attr("url")){var t=$("#keyword-box").val(),n=$("#keyword-box").attr("url");query={name:t,url:n},l(menu,query)}else{var a=$(".search-txt form").attr("data-action"),t=$("#keyword-box").val(),n=location.protocol+"//"+window.location.host+a+t;""!=t&&(query={name:t,url:n},l(menu,query))}});$(".hot-sug").delegate("li a","click",function(e){var t=$(e.currentTarget);name=t.text(),url=t.attr("href"),query={name:name,url:url},l(menu,query)});$("#suggest-cont").delegate("ul li","click",function(e){var t=$(e.currentTarget);name=t.find(".hot-title i").text(),url=t.attr("actdata"),url=url.substring(url.indexOf("&url=")+5,url.lastIndexOf("&title")),url=unescape(url),query={name:name,url:url},l(menu,query)});var a=localStorage.getItem(menu);if(null!=(a=JSON.parse(a))){$("#keyword-box").val(a[0].name);var o=$(".hot-sug ul#"+t+" .list"),i=$(".hot-sug ul#"+t+" .hot-name"),r=o.html();i.text("搜索历史"),o.html(""),$.each(a,function(e,n){var a='<li><a href="'+n.url+'" data-log_index="'+(e+1)+'" data-log_value="'+n.name+'" data-log_channel="'+t+'">'+$.encodeHTML(n.name)+"</a></li>";o.append(a)});var c=$("#"+t+" .del");c.show(),c.click(function(e){localStorage.removeItem(menu),o.html(""),o.append(r),i.text("热门搜索"),c.hide(),texval})}}}function d(){var e=(g.attr("actdata"),$(".savesearch"));e.length&&h({el:e,callback:function(){var e=ljConf.city_id,t=new $.ListView({el:".savesearch",template:"#savesearch",url:ljConf.pageConfig.ajaxroot+"user/favorite/getSearchNotifyNum",type:"jsonp",args:{cityId:e}});t.showloading=function(){},t.init()}});var t=$(".savesearch");t.find(".s-show");t.delegate(".more","click",function(e){var t=$(e.currentTarget);t.parent("ul").find(".list").css({height:"auto"}),t.hide()}),t.delegate(".s-show","click",function(e){var t=$(e.currentTarget);t.next(".cunn").toggle(),"none"==t.next(".cunn").css("display")?t.find("label").removeClass("down"):t.find("label").addClass("down"),$(".sug-tips ul").hide()}),$(".savesearch .s-show").click(function(){}),$(document.body).on("mousedown",function(e){$(e.target).closest(".savesearch").length||(t.find(".cunn").hide(),t.find("label").removeClass("down"))})}function f(){var e=$('[data-role="huodong-btn"]'),t=$('[data-role="huodong-mask"]'),n=$('[data-role="huodong-layer"]');e.length>0&&(e.click(function(){t.fadeIn(500),n.addClass("bounceIn").show()}),n.click(function(e){var a=$(e.target);(0==a.closest('[data-role="huodong-wrap"]').length||a.closest(".close").length>0)&&(t.fadeOut(500),n.removeClass("bounceIn").fadeOut())}))}var h=require("common/lazyExecute"),p=$(".search-tab .tabs"),g=$(".search-tab .check"),m=$(".feedback-box").html(),v=$(".overlay_bg");return{init:function(r){u(),t(),e(),a(),s(),f(),c(),i(),o(),d(),n()}}}),define("common/ocpc",function(){function e(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}function t(e,t){return String.prototype.split.call(t,e)}var n=["qz_gdt","gdt_vid","bd_vid"];return function(e,n,a){for(var o=t(e,n),i={},r=0;r<o.length;r++)if(""!==o[r]){var c=t("=",o[r]);if(2!==c.length){i=null;break}i[c[0]]=c[1]}"function"==typeof a&&a(i)}("&",window.location.search.substring(1),function(t){for(var a="",o=0;o<n.length;o++)if(t&&t[n[o]])return a=window.location.href,void(e("sessionStorage")&&window.sessionStorage.setItem("ad_loginurl",a))}),{getValue:function(){return e("sessionStorage")?window.sessionStorage.getItem("ad_loginurl"):""}}}),define("common/lianjiaTrack",function(){var e,t=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),n=function(){var a=location.href;if(a!=e){try{window.track_handle.resetGlobal({pid:ljConf&&ljConf.page&&ljConf&&"site_index"==ljConf.page?"bigc_pc":"bigc_pc_ershou",uicode:ljConf&&ljConf.page,token:o("lianjia_token")[0],ssid:o("lianjia_ssid")[0],uuid:o("lianjia_uuid")[0],cid:ljConf&&ljConf.city_id,f:document.referrer}),window.$ULOG&&$ULOG.send("1,3")}catch(e){}e=a}t(n)},a=function(e,t,n){var a,o,i=+new Date,r=document.createElement("script");r.src=e,r.async=1,(document.head||document.getElementsByTagName("head")[0]||document.documentElement).appendChild(r),r.onload=r.onreadystatechange=function(){a||r.readyState&&!/^c|loade/.test(r.readyState)||(r.onload=r.onerror=r.onreadystatechange=null,a=1,o&&clearTimeout(o),n&&n()||!n?t&&t("success",+new Date-i):t&&t("load succ,but run error",+new Date-i))},r.onerror=function(){r.onload=r.onerror=r.onreadystatechange=null,a=1,o&&clearTimeout(o),t&&t("error",8e4)},o=setTimeout(function(){r.onload=r.onerror=r.onreadystatechange=null,a=1,t&&t("timeout",8e3)},1e4)},o=function(e){e=e.replace(/([\.\[\]\$])/g,"\\$1");for(var t=new RegExp("(^| )"+e+"=([^;]*)?;","ig"),n=document.cookie+";",a=t.exec(n),o=[];a;)o.push(a[2]||""),a=t.exec(n);return o},i=[],r={init:function(){window.track_handle||(window.track_handle={send:function(e,t,n){i.push({evtid:e,event:t,action:n})},checkNodes:function(){}},r.initDoms())},initDoms:function(){e=location.href;var t="",n=location.hostname;switch(n){case"user.lianjia.com":t="user";break;case"agent.lianjia.com":t="agent";break;case"page.lianjia.com":t="page";break;case"m.bianque.link.lianjia.com":t="linkappm";break;default:t=null!==n.match(/^(us|ca|uk|au|nz|ja|fr|kr|ger|sg)\.lianjia\.com/g)?"overseas":null!==n.match(/^dianpu\.lianjia\.com/g)?"dianpu":"lianjiaweb"}var r=require("common/ocpc").getValue()
;a("//s1.ljcdn.com/lianjia-track/js/1.4.7/index.js",function(e,n){if("success"==e){window.track_handle=new LIANJIA_TRACK({mode:["dig","sa"],digConfig:{autosend:!1,target:"https:"==location.protocol?"//dig.lianjia.com/bigc.gif":"//test.dig.lianjia.com/bigc.gif"},saConfig:{server_url:"https://sensors.ke.com/sa?project=production",show_log:"https:"!=location.protocol},domConfig:{clickClass:"CLICKDATA",clickEvtKey:"data-click-evtid",clickEventKey:"data-click-event",clickActionKey:"data-action",viewClass:"VIEWDATA",viewEvtKey:"data-view-evtid",viewEventKey:"data-view-event",viewActionKey:"data-action"},globalData:{pid:t,uicode:ljConf&&ljConf.page,token:o("lianjia_token")[0],ssid:o("lianjia_ssid")[0],uuid:o("lianjia_uuid")[0],cid:ljConf&&ljConf.city_id,f:document.referrer,action:{ad_loginurl:r}}});for(var a=0;a<i.length;a++)window.track_handle&&window.track_handle.send(i[a].evtid,i[a].event,i[a].action)}})},bind:function(){n()}};r.init(),console.log&&(console.log("确认过眼神，你就是对的人\n来到链家，你可以尽情发挥自己的特长\n来到链家，你可以不断提高自己的技术\n加入链家，加入贝壳，成就房产行业新的巅峰"),console.log("请将简历发送至 %c guliming@ke.com（ 邮件标题请以“姓名-应聘XX职位-来自console”命名）","color:red"),console.log("%c前端，PHP，QA等等各个岗位各个级别都有在招哦，期待你的加入！","color:red"),console.log("职位介绍：http://join.ke.com/"))}),function(){$.listener=new $.EventEmitter(!0),$.env=require("common/env"),$(document.body).ready(function(){function e(){setTimeout(function(){$(".LOGVIEW:above-the-fold").each(function(){var e=$(this);LjUserTrack.send({typ:"show"},e.get(0)),e.removeClass("LOGVIEW")}),e()},100)}function t(){setTimeout(function(){$(".LOGVIEWDATA:above-the-fold").each(function(){var e=$(this),t="",n={},a={typ:"show"};for(var o in this.dataset)o.indexOf("lj_view_evtid")>-1&&(t=this.dataset[o]),o.indexOf("lj_data_")>-1&&(n[o.split("lj_data_")[1]]=this.dataset[o],!0),o.indexOf("lj_action_")>-1&&(a[o.split("lj_action_")[1]]=this.dataset[o],!0,!0),"lj_view_event"==o&&(a.event=this.dataset[o]);n.action=a,t&&LjUserTrack.sendData(t,n),e.removeClass("LOGVIEWDATA")}),t()},100)}require("common/login").init(),require("common/lianjiaTrack");var n=$("#only");if(n.attr("data-city")&&(n.attr("data-city").indexOf("su")>=0||n.attr("data-city").indexOf("jn")>=0)&&($(".laisuzhou").addClass("laisuzhou-class"),$(document.body).delegate(".laisuzhou","click",function(e){return!1})),require("common/footer").init(),e(),t(),function(){var e=$(document.body);e.on("mousedown",".LOGCLICK",function(){LjUserTrack.send({typ:""},$(this).get(0))}),e.on("mousedown",".LOGCLICKDATA",function(e){var t="",n={},a=!1,o={};for(var i in this.dataset)i.indexOf("lj_evtid")>-1&&(t=this.dataset[i]),i.indexOf("lj_data_")>-1&&(n[i.split("lj_data_")[1]]=this.dataset[i]),i.indexOf("lj_action_")>-1&&(o[i.split("lj_action_")[1]]=this.dataset[i],a=!0),"lj_click_event"==i&&(o.event=this.dataset[i]);a&&(n.action=o),t&&LjUserTrack.sendData(t,n)}),e.on("mousedown",".LOGCLICKEVTID",function(e){e.target.getAttribute("data-log_title")?window.$ULOG&&$ULOG.send(e.target.getAttribute("data-log_evt_id"),{action:{title:e.target.getAttribute("data-log_title")}}):window.$ULOG&&$ULOG.send(e.target.getAttribute("data-log_evt_id"))}),BeikeLoginSDK.getUserInfo(function(t){e.on("mousedown",".LOGKEFU",function(){LjUserTrack.send({ljweb_mod:"imclick",ljweb_bl:t&&1==t.code?"1":"0",ljweb_el:"BB120",ljweb_group:1}),LjUserTrack.send({ljweb_mod:"imclick",ljweb_bl:t&&1==t.code?"1":"0",ljweb_el:"BB120",ljweb_group:1,evt_id:"10190"})})})}(),$.inViewLogData=t,$(window).on("load",function(){setTimeout(function(){window.frames&&LjUserTrack.sendId(window.frames.length?"10285":"10286")},2e3)}),!a)var a=function(e,t,n){var a={plat_form:navigator.platform,page_url:window.location.href};t=$.extend(a,t),dt.notify(e,n||window.location.href,t)};$.ajaxSetup({beforeSend:function(e,t){$.jqxhrUrl=t&&t.url},complete:function(e){var t="";try{if(e.responseText?t=e.responseText:e.responseJSON&&(t=JSON.stringify(e.responseJSON)),t){var n=t.match(/\"hdic_house_id\"|\"house_id\"|\"hdicHouseId\"|\"houseId\"/);n&&a("接口含有异常字段",{reqApi:$.jqxhrUrl,url:window.location.href,param:n[0]})}}catch(e){}}})})}();var __ocpc=function(){function e(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}}function t(e,t){return String.prototype.split.call(t,e)}var n=["qz_gdt","gdt_vid","bd_vid"];return function(e,n,a){for(var o=t(e,n),i={},r=0;r<o.length;r++)if(""!==o[r]){var c=t("=",o[r]);if(2!==c.length){i=null;break}i[c[0]]=c[1]}"function"==typeof a&&a(i)}("&",window.location.search.substring(1),function(t){for(var a="",o=0;o<n.length;o++)if(t&&t[n[o]])return a=window.location.href,void(e("sessionStorage")&&window.sessionStorage.setItem("ad_loginurl",a))}),{getValue:function(){return e("sessionStorage")?window.sessionStorage.getItem("ad_loginurl"):""}}}();